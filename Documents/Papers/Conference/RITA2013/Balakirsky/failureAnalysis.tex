\section{Failure Analysis}
\label{sect:failure}
As seen in Figure~\ref{fig:predicateEval}, failures are identified during the evaluation of preconditions and effects. 
In addition to recognizing failures, it is desired to be able to respond to them.
In order to properly model this response, additional information must be modeled
in the ontology. As shown in Figure \ref{fig:failure}, the class {\it ActionFailureType} has been added to the ontology. This class is composed of a {\it PredicateType} class and a {\it FailureModeType} class. It contains all of the information required to be able to diagnose and remediate any failures that are detected by the system.

The {\it PredicateType} class contains a list of predicates whose truth values caused the detection of the current failure condition. Examination of the instances pointed to by the {\it ReferenceParameter} and the {\it TargetParameter} allow the system to understand exactly which components were involved in the failure.

The {\it FailureModeType} class provides various known failure modes that could exist for the combination of {\it PredicateType}s that were found deficient. It provides the consequences of such a failure occurring, information on how to remediate such a failure, and the chance that this kind of failure could occur. Understanding the consequences of the failure mode is important if one would like to be able to
pinpoint the correct cause of the failure. For example, assume that the action {\sc take-part} failed, and the predicate that indicated the failure was {\it part-location-robot}. 

Understanding where the part is actually located is critical to understanding the root cause of the failure. If the part is still in the parts tray, it would indicate a grasp related failure. If the part is on the floor of the cell, it would indicate a part handling error. This kind of information is represented in the {\it Effect} class of the consequences. Being able to pinpoint the effects of the failure also allows for judgment on the failure severity. A missed grasp will likely lead to a new grasp attempt and will have little impact on operation. A dropped part may cause damage to the part and have a higher severity level.

Failure remediation is described by the {\it FailureRemediation} class. This class contains information on what notifications need to be sent as a result of the failure as well as what actions should be taken. Continuing our example from above, the grasp failure may cause grasping information to be sent to the enginering department for algorithm refinement, while the dropped part may notify logistics that an additional component will be required. Recovery from the failure is possible by executing the {\it Plan} that accompanies the detected failure.
