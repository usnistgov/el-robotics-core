PDDL is an attempt to standardize planning domain and problem description languages. A state-variable representation (SVR)~\cite{NAU.2004} is used to define the planning domain and problem that will be translated into PDDL format. In a SVR, each state is represented by a tuple of values of $n$ state variables $\lbrace x_1,\dots,x_n\rbrace$, and each action is represented by a partial function that maps this tuple into some other tuple of values of the $n$ state variables.
%\subsection{Planning Domain for Kitting}

\subsection{Constant Symbols for the Kitting Domain}
In the SVR, constant symbols are partitioned into disjoint classes corresponding to the objects of the domain. For the kitting domain, these classes are derived from the concepts represented in the ontology (see Section~\ref{sect:OWL_Layer}). The finite set of all constant symbols in the kitting domain is partitioned into the following sets of constant symbols:
\begin{small}
\begin{itemize}
\item A set of $\mathrm{robots\ \lbrace r_1, r_2,\dots \rbrace}$: robotic arms that can move objects in order to build kits.

\item A set of $\mathrm{kit\ trays\ \lbrace kt_1, kt_2,\dots \rbrace}$: trays that can contain parts. A kit is built when a kit tray contains all the parts necessary to produce a kit. A kit tray is empty when it does not contain any part and finished when it contains all the parts that constitute a kit. When a kit tray is neither empty nor finished, it is a partially full kit tray.

\item A set of $\mathrm{part\ bins\ \lbrace pb_1, pb_2,\dots \rbrace}$: part bins contain parts of the same type.

\item A set of $\mathrm{parts\ \lbrace p_1, p_2,\dots \rbrace}$: parts are placed in kit trays until the appropriate kits are built. 
\item A set of $\mathrm{gripper\ effectors\ \lbrace geff_1, geff_2,\dots \rbrace}$: gripper effectors hold objects by gripping them with fingers or claws.

\item A set of $\mathrm{gripper\ effector\ holders\ \lbrace geffholder_1, geffholder_2,\dots \rbrace}$: gripper effector holders hold gripper effectors.

\item A symbol $\mathrm{changing\ station}$ -- $\mathrm{chstation}$: a changing station is made up of gripper effector holders.

\item A set of $\mathrm{boxes\ finished\ kit\ trays\ \lbrace bfkt_1, bfkt_2,\dots \rbrace}$: boxes that only contain finished kits.

\item A set of $\mathrm{boxes\ empty\ kit\ trays\ \lbrace bekt_1, bekt_2,\dots \rbrace}$: boxes that only contain empty kit trays.

\item A symbol $\mathrm{work\ table}$ -- $\mathrm{wtable}$: a work table is an area in the kitting workstation where kit trays are placed to build kits.
\end{itemize}
\end {small}
\subsection{State Variable Symbols for the Kitting Domain}
{\it the next sentence is confusing...}

State variable symbols are functions from the set of states and zero or more sets of constant variables into a set of constant variables~\cite{NAU.2004}. Using state variable symbols reduces the possibility of inconsistent states and generates a smaller state space. A state variable symbol is an expression of the form ...The following state variable symbols are used in the kitting domain:

{\it not all of your item names are the same font...}
\begin{itemize}
\item geffloc: \emph{gripper effectors}$\times S\rightarrow$ \emph{robots} $\cup$ \emph{gripper effector holders}: designates the location of a gripper effector in the workstation. The gripper can be in a gripper effector holder or attached to the robot.


\item rgrip: \emph{robots}$\times S\rightarrow$\emph{gripper effectors} $\cup$ $\lbrace nil\rbrace$: designates the gripper effector that is attached to a robot or $nil$ if no gripper effector is attached.

\item topworktable: \emph{work table} $\times S \rightarrow$ \emph{kit trays} $\cup$ $\lbrace nil\rbrace$: designates the object placed on the work table: a kit tray or nothing ($nil$).

\item \texttt{ktloc}: \emph{kit trays} $\times S \rightarrow$ \emph{boxes of empty kit trays} $\cup$ \emph{boxes of finished kit trays} $\cup$ \emph{work table} $\cup$ \emph{robots}: designates the different possible locations of a kit tray in the workstation. The kit tray can be in the box of empty kit trays, in the box of finished kit trays, on the work table, or in the robot's gripper effector.

\item \texttt{ploc}: \emph{parts} $\times S \rightarrow$ \emph{part bins} $\cup$ \emph{kit trays} $\cup$ \emph{robots}: designates the different possible locations of a part in the workstation. The part can be in a part bin, in a kit tray, or in the robot's gripper effector.

\item \texttt{rhold}: \textit{robots} $\times S \rightarrow$ \textit{kit trays} $\cup$ \textit{parts} $\cup$ $\lbrace nil\rbrace$: designates the object being held by the robot. It can be a kit tray, a part, or nothing ($nil$). It is assumed that the robot is already equipped with the appropriate gripper effector.

\item \texttt{isboxfktfull}: \textit{boxes of finished kit trays} $\times$ $S \rightarrow$ $\lbrace 0\rbrace$ $\cup$ $\lbrace 1\rbrace$: designates if a box of finished kit trays is full (1) or not (0).

\item \texttt{isboxektempty}: \textit{boxes of empty kit trays} $\times$ $S \rightarrow$ $\lbrace 0\rbrace$ $\cup$ $\lbrace 1\rbrace$: designates if a box of empty kit trays is empty (1) or not (0).

\item \texttt{ispartbinempty}: \textit{part bins} $\times$ $S \rightarrow$ $\lbrace 0\rbrace$ $\cup$ $\lbrace 1\rbrace$: designates if a part bin is empty (1) or not (0).

\item \texttt{gefftype}: \textit{gripper effectors} $\times$ $S \rightarrow$ \textit{kit trays} $\cup$ \textit{parts}: designates the type of object the gripper effector can hold. For the kitting domain used in this paper, a gripper effector can hold two types of object: kit trays and parts.
\end{itemize}

%\subsection{Planning Problem for Kitting}

\subsection{Planning Operators for Kitting}
A planning operator~\cite{NAU.2004} is a triple \textit{o=(name(o), precond(o), effects(o))}
where:
\begin{itemize}
\item name(o) is a syntactic expression of the form $n(u_1,\dots,u_k)$, where $n$ is a symbol
called an operator symbol, $u_1,\dots,u_k$ are all of the object variable symbols that
appear anywhere in \textit{o}, and $n$ is unique (i.e., no two operators can have the
same operator symbol).
\item precond(o) is a set of expressions on state variables and relations.
\item effects(o) is a set of assignments of values to state variables of the form
$x(t_1,\dots,t_k)\leftarrow t_{k+1}$, where each $t_i$ is a term in the appropriate range.
\end{itemize}

The kitting domain is constituted of the eight following operators:
\begin{small}
\begin{enumerate}
\item \textsl{take-kt-bekt} ($\mathrm{r}$, $\mathrm{kt}$, $\mathrm{boxekt}$, $\mathrm{geff}$)
\begin{itemize}
\item ;;The robot $\mathrm{r}$ is equipped with the gripper effector $\mathrm{geff}$ to pick up the kit tray $\mathrm{kt}$ from the box of empty kit trays $\mathrm{boxekt}$.
\item precond:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)=boxekt}$
\item[]\emph{rhold}$\mathrm{(r)=nil}$
\item[]\emph{rgrip}$\mathrm{(r)=geff}$
\item[]\emph{isboxektempty}$\mathrm{(kt)=0}$
\item[]\emph{geffloc}$\mathrm{(geff)=r}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)\leftarrow r}$
\item[]\emph{rhold}$\mathrm{(r)\leftarrow kt}$
\end{itemize}
\end{itemize}

\item \textsl{put-kt-wtable} ($\mathrm{r}$, $\mathrm{kt}$, $\mathrm{wtable}$)
\begin{itemize}
\item ;;The robot $\mathrm{r}$ puts down the kit tray $\mathrm{kt}$ on the work table $\mathrm{wtable}$.
\item precond:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)=r}$
\item[]\emph{rhold}$\mathrm{(r)=kt}$
\item[]\emph{topworktable}$\mathrm{(wtable)=nil}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)\leftarrow wtable}$
\item[]\emph{rhold}$\mathrm{(r)\leftarrow nil}$
\item[]\emph{topworktable}$\mathrm{(r)\leftarrow kt}$
\end{itemize}
\end{itemize}

\item \textsl{take-kt-wtable} ($\mathrm{r}$, $\mathrm{kt}$, $\mathrm{wtable}$, $\mathrm{geff}$)
\begin{itemize}
\item ;;The robot $\mathrm{r}$ picks up the kit tray $\mathrm{kt}$ from the work table $\mathrm{wtable}$.
\item precond:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)=wtable}$
\item[]\emph{rhold}$\mathrm{(r)=nil}$
\item[]\emph{topworktable}$\mathrm{(wtable)=kt}$
\item[]\emph{rgrip}$\mathrm{(r)=geff}$
\item[]\emph{geffloc}$\mathrm{(geff)=r}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)\leftarrow nil}$
\item[]\emph{rhold}$\mathrm{(r)\leftarrow kt}$
\item[]\emph{topworktable}$\mathrm{(r)\leftarrow nil}$
\end{itemize}
\end{itemize}

\item \textsl{put-kt-bfkt} ($\mathrm{r}$, $\mathrm{kt}$, $\mathrm{boxfkt}$)
\begin{itemize}
\item ;;The robot $\mathrm{r}$ puts down the kit tray $\mathrm{kt}$ in the box of finished kit trays $\mathrm{boxfkt}$.
\item precond:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)=nil}$
\item[]\emph{rhold}$\mathrm{(r)=kt}$
\item[]\emph{isboxfktfull}$\mathrm{(boxfkt)=0}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)\leftarrow boxfkt}$
\item[]\emph{rhold}$\mathrm{(r)\leftarrow nil}$
\end{itemize}
\end{itemize}

\item \textsl{take-p} ($\mathrm{r}$, $\mathrm{p}$, $\mathrm{pb}$, $\mathrm{geff}$)
\begin{itemize}
\item ;;Robot $\mathrm{r}$ uses gripper effector $\mathrm{geff}$ to pick up part $\mathrm{p}$ from part bin $\mathrm{pb}$.
\item precond:
\begin{itemize}
\item[]\emph{ploc}$\mathrm{(p)=pb}$
\item[]\emph{rhold}$\mathrm{(r)=nil}$
\item[]\emph{rgrip}$\mathrm{(r)=geff}$
\item[]\emph{ispartbinempty}$\mathrm{(pb)=0}$
\item[]\emph{geffloc}$\mathrm{(geff)=r}$

\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{ploc}$\mathrm{(p)=r}$
\item[]\emph{rhold}$\mathrm{(r)=p}$
\end{itemize}
\end{itemize}

\item \textsl{put-p} ($\mathrm{r}$, $\mathrm{p}$, $\mathrm{kt}$)
\begin{itemize}
\item ;;Robot $\mathrm{r}$ puts down part $\mathrm{p}$ in kit tray $\mathrm{kt}$.
\item precond:
\begin{itemize}
\item[]\emph{ploc}$\mathrm{(p)=r}$
\item[]\emph{rhold}$\mathrm{(r)=p}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{ploc}$\mathrm{(p)=kt}$
\item[]\emph{rhold}$\mathrm{(r)=nil}$
\end{itemize}
\end{itemize}

\item \textsl{attach-geff} ($\mathrm{r}$, $\mathrm{geff}$, $\mathrm{geffholder}$)
\begin{itemize}
\item ;;Robot $\mathrm{r}$ attaches gripper effector $\mathrm{geff}$ from gripper effector holder $\mathrm{geffholder}$.
\item precond:
\begin{itemize}
\item[]\emph{geffloc}$\mathrm{(geff)=geffholder}$
\item[]\emph{rgrip}$\mathrm{(r)=nil}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{geffloc}$\mathrm{(geff)=r}$
\item[]\emph{rgrip}$\mathrm{(r)=geff}$
\end{itemize}
\end{itemize}

\item \textsl{remove-geff} ($\mathrm{r}$, $\mathrm{geff}$, $\mathrm{geffholder}$)
\begin{itemize}
\item ;;Robot $\mathrm{r}$ removes gripper effector $\mathrm{geff}$ and put it in gripper effector holder $\mathrm{geffholder}$.
\item precond:
\begin{itemize}
\item[]\emph{geffloc}$\mathrm{(geff)=r}$
\item[]\emph{rgrip}$\mathrm{(r)=geff}$
\end{itemize}
\item effects:
\begin{itemize}
\item[]\emph{geffloc}$\mathrm{(geff)=geffholder}$
\item[]\emph{rgrip}$\mathrm{(r)=nil}$
\end{itemize}
\end{itemize}
\end{enumerate}
\end{small}


\begin{comment}
\begin{tabular}{p{3.5cm}p{3.5cm}}
\begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)\leftarrow nil}$
\item[]\emph{rhold}$\mathrm{(r)\leftarrow kt}$
\item[]\emph{topworktable}$\mathrm{(r)\leftarrow nil}$
\end{itemize} & \begin{itemize}
\item[]\emph{ktloc}$\mathrm{(kt)\leftarrow nil}$
\item[]\emph{rhold}$\mathrm{(r)\leftarrow kt}$
\item[]\emph{topworktable}$\mathrm{(r)\leftarrow nil}$
\end{itemize}
\end{tabular}

\begin{table}[ht]
\centering
\begin{tabular}{|c|p{6cm}|} \hline
\multirow{4}{*}{\begin{sideways}{\small \textsl{take-kt-bekt}}\end{sideways}} & \rule[-1ex]{0pt}{3.5ex} {\small $\mathrm{r}$, $\mathrm{kt}$, $\mathrm{boxekt}$, $\mathrm{geff}$}  \T\\ \cline{2-2}
&\rule[-1ex]{0pt}{3.5ex}{\small The robot $\mathrm{r}$ is equipped with the gripper effector $\mathrm{geff}$ to pick up the kit tray $\mathrm{kt}$ from the box of empty kit trays $\mathrm{boxekt}$.}\T \\ \cline{2-2}
& {\small \emph{ktloc}($\mathrm{kt}$)$\mathrm{= boxekt}$, \emph{rhold}($\mathrm{r}$)$\mathrm{= nil}$, \emph{rgrip}($\mathrm{r}$)$\mathrm{= geff}$, \emph{isboxektempty}($\mathrm{kt}$)$=0$} \\
& Max-Min \\ \hline
\end{tabular}
\end{table}


The operators on the kitting domain are defined as follows:

\begin{itemize}
\item \textbf{take\_kt\_bekt} (\emph{r}, \emph{kt}, \emph{boxekt})
\begin{itemize}
\item ;;The robot \emph{r} takes the kit tray \emph{kt} from the box of empty kit trays \emph{boxekt}.
\item \textit{precond}: \textit{ktloc}(\ekt)=\boxekt, \textit{rhold}(\robot)=\nil
\item \textit{effects}: \textit{ektloc}(ekt)=\robot, \textit{rhold}(\robot)=\ekt
\end{itemize}

\item \textit{putEkt} (\robot, \ekt, \wtable)
\begin{itemize}
\item ;;The robot \robot puts the empty kit tray \ekt on the work table \wtable.
\item \textit{precond}: \textit{ektloc}(\ekt)=\robot, \textit{rhold}(\robot)=\ekt
\item \textit{effects}: \textit{ektloc}(\ekt)=\wtable, \textit{rhold}(\robot)=\nil
\end{itemize}

\item \textit{takeFkt} (\robot, \fkt, \wtable)
\begin{itemize}
\item ;;The robot \robot takes the full kit tray \fkt from the work table \wtable.
\item \textit{precond}: \textit{fktloc}(\fkt)=\wtable, \textit{rhold}(\robot)=\nil
\item \textit{effects}: \textit{fktloc}(\fkt)=\robot, \textit{rhold}(\robot)=\fkt
\end{itemize}

\item \textit{putFkt} (\robot, \fkt, \boxekt)
\begin{itemize}
\item ;;The robot \robot puts the full kit tray \fkt in the box of full kit trays \boxfkt.
\item \textit{precond}: \textit{ektloc}(\fkt)=\robot, \textit{rhold}(\robot)=\fkt
\item \textit{effects}: \textit{ektloc}(\fkt)=\boxfkt, \textit{rhold}(\robot)=\nil
\end{itemize}

\item \textit{takeP} (\robot, \parts, \partsup)
\begin{itemize}
\item ;;The robot \robot takes the part \parts from the part supply tray \partsup.
\item \textit{precond}: \textit{ploc}(\parts)=\partsup, \textit{rhold}(\robot)=\nil
\item \textit{effects}: \textit{ploc}(\parts)=\robot, \textit{rhold}(\robot)=\parts
\end{itemize}

\item \textit{putP} (\robot, \parts, \kt)
\begin{itemize}
\item ;;The robot \robot puts the part \parts in the kit tray \kt.
\item \textit{precond}: \textit{ploc}(\parts)=\robot, \textit{rhold}(\robot)=\parts
\item \textit{effects}: \textit{ploc}(\parts)=\kt, \textit{rhold}(\robot)=\nil
\end{itemize}

\item \textit{aboveP} (\parts, {\constant{pos1}}, {\constant{pos2}})
\begin{itemize}
\item ;;The robot r stations over the part \parts at the position pos2. The previous position of the robot is pos1.
\item \textit{precond}: \textit{rpos}(\robot)={\constant{pos1}}
\item \textit{effects}: \textit{rpos}(\robot)={\constant{pos2}}
\end{itemize}

\item \textit{aboveKit} (\kt, {\constant{pos1}}, {\constant{pos2}})
\begin{itemize}
\item ;;The robot \robot stations over the kit tray \kt at the position pos2. The previous position of the robot is pos1.
\item \textit{precond}: \textit{rpos}(\robot)={\constant{pos1}}
\item \textit{effects}: \textit{rpos}(\robot)={\constant{pos2}}
\end{itemize}

\item \textit{aboveBekt} (\boxekt, {\constant{pos1}}, {\constant{pos2}})
\begin{itemize}
\item ;;The robot \robot stations over the box of empty kit trays at the position pos2. The previous position of the robot is pos1.
\item \textit{precond}: \textit{rpos}(\robot)={\constant{pos1}}
\item \textit{effects}: \textit{rpos}(\robot)={\constant{pos2}}
\end{itemize}

\item \textit{aboveBfkt} (\boxfkt, {\constant{pos1}}, {\constant{pos2}})
\begin{itemize}
\item ;;The robot \robot stations over the box of full kit trays at the position {\constant{pos2}}. The previous position of the robot is {\constant{pos1}}, the final position is {\constant{pos2}}.
\item \textit{precond}: \textit{rpos}(\robot)={\constant{pos1}}
\item \textit{effects}: \textit{rpos}(\robot)={\constant{pos2}}
\end{itemize}

\item \textit{attach} (\robot, \grip, \chstation)
\begin{itemize}
\item ;;The robot \robot attaches the gripper \grip.
\item \textit{precond}: \textit{gloc}(\grip)=chstation,
\item \textit{effects}: \textit{gloc}(\grip)=\robot
\end{itemize}

\item \textit{remove} (\robot, \grip, chstation)
\begin{itemize}
\item ;;The robot \robot removes the gripper \grip.
\item \textit{precond}: \textit{gloc}(\grip)=\robot,
\item \textit{effects}: \textit{gloc}(\grip)=\chstation
\end{itemize}
\end{itemize}
\end{comment}

\subsubsection{Definition of the Initial State}

\subsubsection{Definition of the Goal State}
