<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CRCL FANUC: QT Creator and ROS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CRCL FANUC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">QT Creator and ROS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>QT is a cross-platform application framework that is widely used for developing application software that can be run on various software and hardware platforms, while still being a native application with the capabilities and speed thereof.</p>
<p>It was desired to use the Qt Creator IDE to edit and debug ROS packages. After a couple days of missteps the following worked for me.</p>
<p>As a novice to Ubuntu and CMake, I suggest to first read this web site, which offers a good background tutorial, on Makfiles, make, cmake and catkin: <a href="http://jbohren.com/articles/gentle-catkin-intro/" title="A Gentle Introduction to Catkin">http://jbohren.com/articles/gentle-catkin-intro/</a></p>
<h2>Installing QT Creator </h2>
<p>sudo apt-get install qtcreator This works. It is best to use from command line. Not sure if this loads the SDK and development libraries for QT. But first wanted to test Qt Creator.</p>
<h2>Python catkin tools </h2>
<p>One of the first of many insights to using Qt Creator with ROS was to use the Python based catkin tools instead of catkin_make. This web site offers a thorough background on the Python catkin tools: <a href="http://catkin-tools.readthedocs.org/en/latest/index.html" title="Catkin Command Line Tools">http://catkin-tools.readthedocs.org/en/latest/index.html</a>.</p>
<p>Briefly, these steps were followed to get the python catkin tools to work:</p>
<p>1) Installed python catkin tools: </p>
<pre class="fragment">sudo apt-get install python-catkin-tools
</pre><p>Note, if you have symbolic links you must manually cd to the actual directory, don't use any symlinks to get there: </p>
<pre class="fragment">cd /usr/local/michalos
</pre><p>2) Reinitialize the catkin workspace with the new python catkin tools: </p>
<pre class="fragment">catkin clean --all
catkin init
qtcreator
</pre><p>3) Open an individual the new python catkin_tools, there is no longer a top level make file for the whole workspace. Instead, open each package as an individual project in QtCreator. The trick is to set the build folder to ws/build/your_package instead of ws/build as before.</p>
<h2>QT Creator use with ROS </h2>
<p>From <code><a href="http://myzharbot.robot-home.it/blog/software/myzharbot-ros/qtcreator-ros">http://myzharbot.robot-home.it/blog/software/myzharbot-ros/qtcreator-ros</a></code>/ and <code><a href="http://www.ciencia-explicada.com/2014/12/ros-how-to-develop-catkin-packages-from-an-ide.html">http://www.ciencia-explicada.com/2014/12/ros-how-to-develop-catkin-packages-from-an-ide.html</a></code></p>
<p>In CMakeLists.txt add: </p>
<pre class="fragment">set(ROS_BUILD_TYPE Debug)
set(CMAKE_BUILD_TYPE Debug)
</pre><p>Invoke qtcreator from a terminal in which you have already setup the ROS environment (normally via .bashrc): </p>
<pre class="fragment">qtcreator
</pre><p>Select the menu: <code>File -&gt; "Open File or projectâ€¦"</code> then pick <code>~/catkin_ws/src/your package/CMakeLists.txt</code> and set the build dir to <code>~/catkin_ws/build/your package/</code> (where ~ stands for your home directory or in my case I used /usr/local/michalos and symbolic links to the actual src directories). Press Configure.</p>
<p>Select the tab <code>Projects -&gt; Build Settings</code> and add these CMake arguments (I hard coded the directory paths): </p>
<pre class="fragment">-DCMAKE_BUILD_TYPE=Debug \
           -DCMAKE_INSTALL_PREFIX=/usr/local/michalos/nistfanuc_ws/install \
           -DCATKIN_DEVEL_PREFIX=/usr/local/michalos/nistfanuc_ws/devel
</pre><p>This way it works for either all packages or an individual package.</p>
<h2>Using Python catkin tools and debugging ROS package in QT Creator </h2>
<p>From <code><a href="http://answers.ros.org/question/67244/qtcreator-with-catkin/">http://answers.ros.org/question/67244/qtcreator-with-catkin/</a></code> the answer can be summarized to:</p>
<ol type="1">
<li>compile the node/package that you want to compile in debug mode Either: <pre class="fragment">        a. add "`set(CMAKE_BUILD_TYPE Debug)`" to your CMakeLists.txt

        b. add `-DCMAKE_BUILD_TYPE=Debug` to the Build arguments
</pre></li>
<li>start your roscore and everything else as usual, except for the node you want to debug (in my case I started the rviz gui).</li>
<li>start qtcreator with "sudo" (remember to source correctly your catkin workspace)</li>
<li>in qtcreator start the debugging mode for the rosnode by going to "Debug"-&gt;"Start Debugging"-&gt;"Attach to unstarted Application...", look for your compiled node, it should be in: "`${CATKIN_WORKSPACE_FOLDER}"/devel/lib/package_name/node_name`" and click "Start Watching".</li>
<li><p class="startli">Debug: a) Either start in the debugger or</p>
<p class="startli">b) start the node in a terminal either with rosrun or roslaunch Note: you need to run qtcreator with "sudo", otherwise you get a "ptrace operation not allowed" problem. Note2: if you try to run qtcreator as a normal user afterwards, you will have problems accessing some of the Qt configuration files of your home folder, run these commands to get this back to normal: </p>
<pre class="fragment">sudo chown -R ${USER}:${USER} .qt
sudo chown -R ${USER}:${USER} .config/
</pre></li>
</ol>
<p>Hey, there is another post in ROS Answers addressing how to debug a rosnode in Qtcreator: <a href="http://answers.ros.org/question/34966..">http://answers.ros.org/question/34966..</a>.</p>
<h2>See ROS header files in Qt Project </h2>
<p>ROS proposes the following code addition to CMakefile (see <code><a href="http://wiki.ros.org/IDEs">http://wiki.ros.org/IDEs</a></code>) </p>
<pre class="fragment">           #Add all files in subdirectories of the project in
           # a dummy_target so qtcreator have access to all files
           FILE(GLOB children ${CMAKE_SOURCE_DIR}/*)
           FOREACH(child ${children})
             IF(IS_DIRECTORY ${child})
               file(GLOB_RECURSE dir_files "${child}/*")
               LIST(APPEND extra_files ${dir_files})
             ENDIF()
           ENDFOREACH()
           add_custom_target(dummy_${PROJECT_NAME} SOURCES ${extra_files})
</pre><p>Another solution (unused) is an answer </p>
<pre class="fragment">http://answers.ros.org/question/56685/is-there-any-way-to-get-qt-creator-to-show-all-of-a-projects-subdirectories/
</pre><p>to the question "I've got many header files *.h and *.hxx which are included in several *.cpp files but do not show up in the project tree on qtcreator, is there any way of telling qtcreator that those files do belong to the project?"</p>
<p>The answer is do include header files in CMakeLists.txt similar to the following: set( MY_SRCS include/version.h include/idcache.h src/json.cpp include/json.h src/diskinfo.cpp include/diskinfo.h src/exif.cpp include/exif.h include/networkmanager.h include/networkmanager_p.h )</p>
<h2>Catkin_make use with QT </h2>
<p><a href="http://answers.ros.org/question/67244/qtcreator-with-catkin/">http://answers.ros.org/question/67244/qtcreator-with-catkin/</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 15 2016 14:48:00 for CRCL FANUC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
