<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CRCL FANUC: Netbeans IDE use with ROS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CRCL FANUC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Netbeans IDE use with ROS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes some insights/tips into using Netbeans with ROS and catkin_make.</p>
<h2>Using Netbeans IDE to Debug ROS executable </h2>
<p>After Compiling Fanuc Demo with Debug Information, Use netbeans to create binary C++ project and read binary file to debug (for example found at */home/michalos/catkin_ws/devel/lib/nist_fanuc/nist_fanuc*)</p>
<h1>Running Netbeans without Environment setup properly </h1>
<p>Unfortunately, you need to source ~/catkin_ws/devel/setup.bash to set up Unix shell enironment variables properly. Since it was not obvious how to run a bash shell before debugging the executable, it was decided a different approach must be used. (running a bash script with gdb was attempted). Instead environment variables were hard coded into the nist_fanuc program, with the use of the posix function "setenv" to set the environment variables (not perfect, but close enough between addition of new ROS packages).</p>
<p>To make it work, I did </p>
<pre class="fragment">&gt; env | grep indigo
</pre><p>to find all the related ROS environment variables. From <a href="http://answers.ros.org/question/123581/rosrun-cannot-find-my-executable/">http://answers.ros.org/question/123581/rosrun-cannot-find-my-executable/</a> found: </p>
<pre class="fragment">catkin_find uses the environment variable CMAKE_PREFIX_PATH to find catkin workspaces.
</pre><p>These workspaces in turn are used in rosrun. ROS_PACKAGE_PATH is no longer enough.</p>
<p>This works, no claims of robustness. The following code was placed at the beginning of the <a class="el" href="nist__fanuc_8cpp.html">nist_fanuc.cpp</a> to set up the environment variables before connecting to the roscore (master). (This assumes that all the basic rviz, robot model, etc. has been launched.) In the code: </p>
<pre class="fragment">static void SetupRos(std::string  envname, std::string envval, int overwrite=1)
{
        setenv( envname.c_str(),envval.c_str(),1 );
}

       // Setup up environment for netbeans that allows ros utilities to work...
        SetupRos("ROS_MASTER_URI", "http://localhost:11311");
        SetupRos("ROS_DISTRO", "indigo");
        SetupRos("ROS_ROOT", "/opt/ros/indigo/share/ros");
        SetupRos("ROS_ETC_DIR", "/opt/ros/indigo/etc/ros");
        SetupRos("ROS_PACKAGE_PATH", "/home/michalos/catkin_ws/src:/opt/ros/indigo/share:/opt/ros/indigo/stacks");
        SetupRos("ROS_TEST_RESULTS_DIR", "/home/michalos/catkin_ws/build/test_results");
        SetupRos("ROS_ETC_DIR", "/opt/ros/indigo/etc/ros");
        SetupRos("OSLISP_PACKAGE_DIRECTORIES", "/home/michalos/catkin_ws/devel/share/common-lisp");
        SetupRos("PYTHONPATH", "/home/michalos/catkin_ws/devel/lib/python2.7/dist-packages:/opt/ros/indigo/lib/python2.7/dist-packages");
        SetupRos("CMAKE_PREFIX_PATH", "/home/michalos/catkin_ws/devel:/opt/ros/indigo");
        SetupRos("PATH", "/home/michalos/catkin_ws/devel/bin:/opt/ros/indigo/bin:/home/michalos/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin");
        SetupRos("PKG_CONFIG_PATH", "/home/michalos/catkin_ws/devel/lib/x86_64-linux-gnu/pkgconfig:/opt/ros/indigo/lib/x86_64-linux-gnu/pkgconfig:/home/michalos/catkin_ws/devel/lib/pkgconfig:/opt/ros/indigo/lib/pkgconfig");
</pre><p>This does not improve the performance of Netbeans.(Often hogging up to 1G! per executable.)</p>
<p>I could rant/rave about Java, but won't. Better than nothing - must be patient as often it takes time to reload the executable.</p>
<h2>Turn off auto paren completion in Netbeans - really annoying </h2>
<pre class="fragment">Tools-&gt;Options
Editor-&gt;Code Completion
</pre><h2>tf include location </h2>
<p>/opt/ros/indigo/include/tf/LinearMath</p>
<h2>Netbeans Turn on/off Exception Breakpoints </h2>
<h3>To turn on breakpoint:</h3>
<p>It's often useful to stop execution of an application when an exception occurs, and inspect the state of the app in debugger. It is very simple to do: setup an exception breakpoint and just run the application via debugger (or attach to an running application).</p>
<p>To setup an exception breakpoint: </p>
<pre class="fragment">Go to menu Debug | New Breakpoint (Ctrl+Shift+F8).
</pre><p>In the New Breakpoint dialog select the Exception breakpoint type from the combobox.</p>
<p>Enter the exception to track (fully qualified class name). You can modify the other properties too.</p>
<p>Typically you want to watch for some general exception superclass, e.g. java.lang.Exception, or exceptions that do not have to be handled, e.g. java.lang.AssertionError, or java.lang.RuntimeException.</p>
<p>In a bigger application you may want to narrow the scope of classes to watch for exceptions only from your classes, not to stop on exceptions from JDK internals or other code. You can set a match or exclude class filter in the Filter on Classes Throwing the Exception option of the breakpoint dialog.</p>
<h3>To turn off breakpoint:</h3>
<p>Select menu Window / Debugging / Breakpoints (or press Alt + Shift + 5), then right-click in the Breakpoints window and select Delete All. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 15 2016 14:48:00 for CRCL FANUC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
